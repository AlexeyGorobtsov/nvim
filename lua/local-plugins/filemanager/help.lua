local M = {}

M.help_text = [[
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              FileManager - ะะพัััะธะต ะบะปะฐะฒะธัะธ               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ ะัะบัััะธะต:
  Ctrl+N      ะพัะบัััั ะฒ ัะตะบััะตะน ัะฐะฑะพัะตะน ะดะธัะตะบัะพัะธะธ (CWD)
  Ctrl+Shift+N ะพัะบัััั ะฒ ะดะธัะตะบัะพัะธะธ ัะตะบััะตะณะพ ัะฐะนะปะฐ

๐ ะะฐะฒะธะณะฐัะธั:
  Enter, l    ะพัะบัััั ัะฐะนะป/ะฟะฐะฟะบั
  h           ะฒะฒะตัั ะฟะพ ะดะตัะตะฒั ะบะฐัะฐะปะพะณะพะฒ
  q, Esc      ะทะฐะบัััั ัะฐะนะปะพะฒัะน ะผะตะฝะตะดะถะตั

๐ ะะฟะตัะฐัะธะธ ั ัะฐะนะปะฐะผะธ:
  yy          ะบะพะฟะธัะพะฒะฐัั ัะฐะนะป/ะฟะฐะฟะบั
  dd          ะฒััะตะทะฐัั ัะฐะนะป/ะฟะฐะ
ฟะบั
  p           ะฒััะฐะฒะธัั ัะบะพะฟะธัะพะฒะฐะฝะฝะพะต
  D           ัะดะฐะปะธัั (ั ะฟะพะดัะฒะตัะถะดะตะฝะธะตะผ)

๐ ะกะพะทะดะฐะฝะธะต:
  a           ัะพะทะดะฐัั ะฝะพะฒัะน ัะฐะนะป
  A           ัะพะทะดะฐัั ะฝะพะฒัั ะฟะฐะฟะบั
  r           ะฟะตัะตะธะผะตะฝะพะฒะฐัั ัะฐะนะป/ะฟะฐะฟะบั

๐ ะะพะฟะธัะพะฒะฐะฝะธะต ะฒ ัะธััะตะผะฝัะน ะฑััะตั:
  yn          ัะบะพะฟะธัะพะฒะฐัั ะธะผั ัะฐะนะปะฐ
  yp          ัะบะพะฟะธัะพะฒะฐัั ะฟะพะปะฝัะน ะฟััั
  (ัะฐะฑะพัะฐะตั ะฒ ะฒะธะทัะฐะปัะฝะพะผ ัะตะถะธะผะต ะดะปั ะฝะตัะบะพะปัะบะธั ัะฐะนะปะพะฒ)

โ๏ธ  ะััะณะพะต:
  R           ะพะฑะฝะพะฒะธัั ัะฟะธัะพะบ ัะฐะนะปะพะฒ
  c           ัะดะตะปะฐัั LCD ะฒ ัะตะบัััั/ะฒัะฑัะฐะฝะฝัั ะฟะฐะฟะบั
              (ะทะฐะฟะพะผะธะฝะฐะตั ะฟััั ะดะปั ัะปะตะดัััะตะณะพ ะพัะบัััะธั)
  ?           ะฟะพะบะฐะทะฐัั ััั ัะฟัะฐะฒะบั

๐ก ะะพะดัะบะฐะทะบะธ:
   โข ะัะฟะพะปัะทัะนัะต ะฒะธะทัะฐะปัะฝัะน ัะตะถะธะผ (V) ะดะปั ะบะพะฟะธัะพะฒะฐะฝะธั
     ะธะผัะฝ ะฝะตัะบะพะปัะบะธั ัะฐะนะปะพะฒ ััะฐะทั
   โข ะะพัะปะต LCD ะผะตะฝะตะดะถะตั ะทะฐะฟะพะผะฝะธั ะฟััั ะธ ะพัะบัะพะตััั
     ะฒ ะฝัะผ ะฟัะธ ัะปะตะดัััะตะผ ะทะฐะฟััะบะต
]]

-- ะะพะบะฐะทะฐัั ัะฟัะฐะฒะบั ัะตัะตะท notify
function M.show_notify()
  vim.notify(M.help_text, vim.log.levels.INFO, {
    title = 'FileManager Help',
    timeout = 10000, -- 10 ัะตะบัะฝะด
  })
end

-- ะะพะบะฐะทะฐัั ัะฟัะฐะฒะบั ะฒ ะพัะดะตะปัะฝะพะผ ะพะบะฝะต (ะฐะปััะตัะฝะฐัะธะฒะฐ)
function M.show_window()
  local buf = vim.api.nvim_create_buf(false, true)

  -- ะะฐะทะฑะธัั ัะตะบัั ะฝะฐ ัััะพะบะธ
  local lines = vim.split(M.help_text, '\n')
  vim.api.nvim_buf_set_lines(buf, 0, -1, false, lines)

  -- ะะฐัััะพะนะบะธ ะฑััะตัะฐ
  vim.api.nvim_buf_set_option(buf, 'modifiable', false)
  vim.api.nvim_buf_set_option(buf, 'buftype', 'nofile')
  vim.api.nvim_buf_set_option(buf, 'bufhidden', 'wipe')
  vim.api.nvim_buf_set_name(buf, 'FileManager Help')

  -- ะกะพะทะดะฐัั ะพะบะฝะพ
  local win = vim.api.nvim_open_win(buf, true, {
    relative = 'editor',
    width = 62,
    height = #lines + 2,
    col = math.floor((vim.o.columns - 62) / 2),
    row = math.floor((vim.o.lines - #lines) / 2),
    style = 'minimal',
    border = 'rounded',
    title = ' FileManager Help ',
    title_pos = 'center',
  })

  -- ะะฐะบัััั ะฟะพ q ะธะปะธ Esc
  vim.keymap.set('n', 'q', '<cmd>close<CR>', { buffer = buf, silent = true })
  vim.keymap.set('n', '<Esc>', '<cmd>close<CR>', { buffer = buf, silent = true })
  vim.keymap.set('n', '?', '<cmd>close<CR>', { buffer = buf, silent = true })

  -- ะะพะดัะฒะตัะบะฐ
  vim.cmd([[
    syn match HelpHeader "^โ.*โ$"
    syn match HelpHeader "^โ.*โ$"
    syn match HelpHeader "^โ.*โ$"
    syn match HelpSection "^๐.*:$"
    syn match HelpSection "^๐.*:$"
    syn match HelpSection "^๐.*:$"
    syn match HelpSection "^๐.*:$"
    syn match HelpSection "^๐.*:$"
    syn match HelpSection "^โ๏ธ.*:$"
    syn match HelpSection "^๐ก.*:$"
    syn match HelpKey "^\s\+\S\+\s*"

    hi def link HelpHeader Comment
    hi def link HelpSection Title
    hi def link HelpKey Keyword
  ]])
end

return M
